<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<title>SEIMS: Parameters sensitivity analysis</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygenextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="topbanner"><a href="https://github.com/lreis2415/SEIMS" title="SEIMS GitHub"><i class="githublogo"></i></a></div>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('getstart_parameters_sensitivity.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Parameters sensitivity analysis </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md59">Simple usage</a></li>
<li class="level1"><a href="#autotoc_md60">Configuration file of parameter sensitivity analysis</a></li>
<li class="level1"><a href="#autotoc_md61">Advanced usage</a></li>
<li class="level1"><a href="#autotoc_md62">See more...</a></li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_doc_en_get_started_parameters_sensitivity"></a></p>
<p ><a class="el" href="group__module__setting.html#struct_parameter" title="Model parameter information class.">Parameter</a> sensitivity analysis is useful for identifying the most important or influential parameters for a specified simulation target (e.g., streamflow at the watershed outlet) (Zhan et al., 2013). A typical sensitivity analysis procedure includes sampling from the value ranges of determined model inputs, evaluating the model with the generated samples and saving the interested outputs, and calculating sensitivity indices by various methods such as the Morris screening method (Morris, 1991) and FAST (Fourier Amplitude Sensitivity Test, Cukier et al., 1978). The sensitivity analysis tool in SEIMS is organized as separated functions according to these steps, which means it is easy to incorporate any sampling method and sensitivity analysis method. The most time-consuming step is repetitive model evaluations, which is parallelized at model level by parallel job management based on SCOOP (Hold-Geoffroy et al., 2014).</p>
<h1><a class="anchor" id="autotoc_md59"></a>
Simple usage</h1>
<p >For simple usage, open a CMD window, enter the following commands to execute the predefined parameter sensitivity analysis of the Youwuzhen watershed model.</p>
<div class="fragment"><div class="line">cd D:\demo\SEIMS\seims\test</div>
<div class="line">D:</div>
<div class="line">python –m scoop –n 2 demo_parameters_sensitivity.py -name youwuzhen</div>
</div><!-- fragment --><p >The runtime logs of the parameter sensitivity analysis including the commands of each model run and the results of sensitivity analysis were showed in Figure 2:6 1.</p>
<p >Firstly, the sampled calibration values of selected parameters were organized as float arrays and imported as <code>CALI_VALUES</code> field into the <code>PARAMETERS</code> collection of the main spatial database. The SEIMS-based watershed model under a combination of calibrated parameters can be evaluated with the <code>calibrationID</code> argument set to the corresponding array index (start from 0) (Figure 2:6 1a). The calibration values can be queried by the following command in the console window of Robo 3T (Figure 2:6 2).</p>
<div class="fragment"><div class="line">db.getCollection(&#39;PARAMETERS&#39;).find({&#39;CALI_VALUES&#39;:{$exists:true}})</div>
</div><!-- fragment --><p >Then, all combinations of calibrated parameters were evaluated in parallel according to the workers’ number of SCOOP, e.g., two workers were allocated in this simple usage (-m scoop –n 2). After the evaluation of each calibrated model, the interested model performance indicators will be calculated and saved. In current version of SEIMS, NSE (Nash-Sutcliffe efficiency), RSR (root mean square error-standard deviation ratio), and PBIAS (percent bias) (Moriasi et al., 2007) were used as model performance indicators. Finally, the sensitivity analysis method (Morris screening method in this demo) will be executed according to the above introduced model outputs. For example, Figure 2:6 3 showed the parameter sensitivity analysis result with respect to the NSE of the simulated streamflow (m3s-1) at the watershed outlet. Each point in the screening plot represents one parameter of the Youwuzhen watershed model. The larger the modified means μ* (Campolongo et al., 2007), the more sensitive the watershed response is to variation in the parameter (Yang, 2011; Zhan et al., 2013). More results can be found in the output directory, e.g., <code>SEIMS\data\youwuzhen\demo_youwuzhen30m_longterm_model\PSA_Morris_N4L2</code>.</p>
<h1><a class="anchor" id="autotoc_md60"></a>
Configuration file of parameter sensitivity analysis</h1>
<p >Also see introduction of the Python package <a class="el" href="intro_parameters_sensitivity_pkg.html">seims.parameters_sensitivity package</a></p>
<p >The configuration file of parameter sensitivity analysis, such as that of the Youwuzhen watershed model shown in Figure 2:6 4, includes four sections, i.e., SEIMS_Model, PARAMETERS, OPTIONAL_PARAMETERS, and OPTIONAL_MATPLOT_SETTING. Among them, OPTIONAL_PARAMETERS and OPTIONAL_MATPLOT_SETTING are optional. The names of sections and options should not be changed.</p>
<ul>
<li>SEIMS_Model: Basic settings of the SEIMS-based watershed model, see Section 2:4.3.2 for details. Note that the OpenMP version of SEIMS main program is used by default. However, the options of version, MPI_BIN, and processNum are supported if the MPI&amp;OpenMP version is wanted.</li>
<li>PSA_PARAMETERS: Basic settings for parameter sensitivity analysis.<ol type="1">
<li>evaluateParam: Simulation target(s) to be evaluated for sensitivity analysis, e.g., Q for streamflow, SED for sediment, and CH_TN for total nitrogen. This option is similar to PLOT_VARIABLES of postprocessing in Section 2:5.2. Multiple parameters should be separated by comma.</li>
<li>paramRngDef: Filename of the definition of parameters’ range. The file follows the basic plain text file format of SEIMS. Each line indicates one parameter to be analyzed with the format of NAME, lower_bound, upper_bound. For example, K_pet,-0.3,0.3 means that the impact value of K_pet ranges from -0.3 to 0.3. The type of CHANGE is the same with that defined in PARAMETERS collection. Relative information please refer to Section 2:4.2.3.</li>
<li>PSA_Time_start: Starting date time of the calculation of model performance for the sensitivity analysis with the format of YYYY-MM-DD HH:MM:SS.</li>
<li>PSA_Time_end: Ending date time of the calculation of model performance for the sensitivity analysis with the format of YYYY-MM-DD HH:MM:SS.</li>
</ol>
</li>
<li>Sections of specific sensitivity analysis methods supported by SALib. Currently, the Morris screening method including groups and optimal trajectories (Morris_Method) and Fourier Amplitude Sensitivity Test (FAST_Method) have been integrated and tested. In the future version of SEIMS, more methods and not limited to the methods of SALib should be integrated.<ol type="1">
<li>Morris_Method: N: The number of trajectories to generate. num_levels: The number of grid levels. The resulting samples have a row number of (D+1)*N, and column number of D, where D is the number of parameters. optimal_trajectories: The number of optimal trajectories to sample (between 2 and N) which can also be None. local_optimization: Flag whether to use local optimization. Speeds up the process tremendously for bigger N and num_levels. If set to False brute force method is used.</li>
<li>FAST_Method: N: The number of samples to generate. M: The interference parameter, i.e., the number of harmonics to sum in the Fourier series decomposition, the default is 4.</li>
</ol>
</li>
<li>OPTIONAL_MATPLOT_SETTINGS: Plot settings for matplotlib, see Section 2:5.2.</li>
</ul>
<div class="fragment"><div class="line">[SEIMS_Model] </div>
<div class="line">MODEL_DIR = D:\demo\SEIMS\data\youwuzhen\demo_youwuzhen30m_longterm_model</div>
<div class="line">BIN_DIR = D:\demo\SEIMS\bin</div>
<div class="line">HOSTNAME = 127.0.0.1</div>
<div class="line">PORT = 27017</div>
<div class="line">threadsNum = 2</div>
<div class="line">layeringMethod = 1</div>
<div class="line">scenarioID = 0</div>
<div class="line"># Simulation period (UTCTIME)</div>
<div class="line">Sim_Time_start = 2012-01-01 00:00:00</div>
<div class="line">Sim_Time_end = 2012-03-09 23:59:59</div>
<div class="line"> </div>
<div class="line">[PSA_Settings]</div>
<div class="line">evaluateParam = Q</div>
<div class="line">paramRngDef = morris_param_rng-Q.def</div>
<div class="line"># Objective calculation period (UTCTIME)</div>
<div class="line">PSA_Time_start = 2012-02-27 00:00:00</div>
<div class="line">PSA_Time_end = 2012-03-09 23:59:59</div>
<div class="line"> </div>
<div class="line">[Morris_Method]</div>
<div class="line">N = 4</div>
<div class="line">num_levels = 2</div>
<div class="line">optimal_trajectories = None</div>
<div class="line">local_optimization = True</div>
<div class="line"> </div>
<div class="line">[OPTIONAL_MATPLOT_SETTINGS]</div>
<div class="line">FIGURE_FORMATS = PDF,PNG</div>
<div class="line">FONT_TITLE = Times New Roman</div>
<div class="line">DPI = 300</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md61"></a>
Advanced usage</h1>
<p >The Python scripts of parameter sensitivity analysis are in <code>SEIMS/seims/parameters_sensitivity</code>. The <code>main.py</code> is the entrance which can be executed though the unified format of running SEIMS Python scripts, e.g.,</p>
<div class="fragment"><div class="line">cd D:\demo\SEIMS\seims\parameters_sensitivity</div>
<div class="line">python main.py -ini D:\demo\SEIMS\data\youwuzhen\workspace\sensitivity_analysis.ini</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md62"></a>
See more...</h1>
<p >Also see introduction of the Python package <a class="el" href="intro_parameters_sensitivity_pkg.html">seims.parameters_sensitivity package</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
</body>
</html>
